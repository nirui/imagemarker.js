/*! imagemarker.js Copyright (C) 2019 Rui NI <ranqus@gmail.com> */
!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(e){return t[e]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=115)}([function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t){var e=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=e)},function(t,e,n){var r=n(34)("wks"),i=n(25),o=n(0).Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(0),i=n(1),o=n(15),s=n(9),u=n(10),a="prototype",l=function(t,e,n){var c,f,h,d=t&l.F,p=t&l.G,v=t&l.S,y=t&l.P,g=t&l.B,m=t&l.W,w=p?i:i[e]||(i[e]={}),_=w[a],x=p?r:v?r[e]:(r[e]||{})[a];for(c in p&&(n=e),n)(f=!d&&x&&void 0!==x[c])&&u(w,c)||(h=f?x[c]:n[c],w[c]=p&&"function"!=typeof x[c]?n[c]:g&&f?o(h,r):m&&x[c]==h?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[a]=t[a],e}(h):y&&"function"==typeof h?o(Function.call,h):h,y&&((w.virtual||(w.virtual={}))[c]=h,t&l.R&&_&&!_[c]&&s(_,c,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,n){var r=n(7);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){var r=n(4),i=n(45),o=n(30),s=Object.defineProperty;e.f=n(8)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(6),i=n(24);t.exports=n(8)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(88));e.default=function(){function t(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,r.default)(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){var r=n(68),i=n(28);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(91)),o=r(n(93)),s="function"==typeof o.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};e.default="function"==typeof o.default&&"symbol"===s(i.default)?function(t){return void 0===t?"undefined":s(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":s(t)}},function(t){t.exports=!0},function(t,e,n){var r=n(23);t.exports=function(t,e,n){return r(t),void 0===e?t:1===n?function(n){return t.call(e,n)}:2===n?function(n,r){return t.call(e,n,r)}:3===n?function(n,r,i){return t.call(e,n,r,i)}:function(){return t.apply(e,arguments)}}},function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t){t.exports={}},function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,e,n){t.exports={default:n(102),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(13));e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(105)),o=r(n(109)),s=r(n(13));e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,s.default)(e)));t.prototype=(0,o.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.default?(0,i.default)(t,e):t.__proto__=e)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.UnexpectedTypeException=void 0;var i=r(n(13)),o=r(n(19)),s=r(n(5)),u=r(n(20)),a=r(n(21));e.assertType=function(t,e){if((void 0===t?"undefined":(0,i.default)(t))!==e)throw new c(void 0===t?"undefined":(0,i.default)(t),e)},e.assertObjectType=function(t,e){if(!(t instanceof e))throw new c(void 0===t?"undefined":(0,i.default)(t),e)},e.isHTMLElement=function(t){return t&&(t instanceof HTMLDocument||"object"===(void 0===t?"undefined":(0,i.default)(t))&&1===t.nodeType)},e.filterDefault=function t(e,n){var r={};for(var o in e)r[o]=e[o];for(var s in n){if(void 0!==r[s]&&(0,i.default)(r[s])!==(0,i.default)(n[s]))throw new c((0,i.default)(n[s]),(0,i.default)(r[s]));"object"!==(0,i.default)(r[s])||r[s]instanceof Array?r[s]=n[s]:r[s]=t(r[s],n[s])}return r};var l=r(n(40)),c=e.UnexpectedTypeException=function(t){function e(t,n){return(0,s.default)(this,e),(0,u.default)(this,(e.__proto__||(0,o.default)(e)).call(this,'Expecting the type to be "'+n+'", got "'+t+'" instead'))}return(0,a.default)(e,t),e}(l.default)},function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},function(t,e,n){var r=n(6).f,i=n(10),o=n(2)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?n:e)(t)}},function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(7),i=n(0).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(7);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(4),i=n(67),o=n(35),s=n(33)("IE_PROTO"),u=function(){},a="prototype",l=function(){var t,e=n(29)("iframe"),r=o.length;for(e.style.display="none",n(49).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;r--;)delete l[a][o[r]];return l()};t.exports=Object.create||function(t,e){var n;return null===t?n=l():(u[a]=r(t),n=new u,u[a]=null,n[s]=t),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(47),i=n(35);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(34)("keys"),i=n(25);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(1),i=n(0),o="__core-js_shared__",s=i[o]||(i[o]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0===e?{}:e)})("versions",[]).push({version:r.version,mode:n(14)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){"use strict";function r(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=i(e),this.reject=i(n)}var i=n(23);t.exports.f=function(t){return new r(t)}},function(t,e,n){e.f=n(2)},function(t,e,n){var r=n(0),i=n(1),o=n(14),s=n(37),u=n(6).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||u(e,t,{value:s.f(t)})}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(5)),o=r(n(11)),s=function(){function t(e){(0,i.default)(this,t),this.message=e}return(0,o.default)(t,[{key:"toString",value:function(){return"[ImageMarker] "+this.message}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.Opened=e.Drawn=e.Background=e.drawEllipse=e.drawRect=e.drawLine=e.drawPath=e.StageAlreadyOpened=e.StageAlreadyComposing=void 0;var i=r(n(62)),o=r(n(11)),s=r(n(19)),u=r(n(5)),a=r(n(20)),l=r(n(21));e.defaultStageControl=function(){var t=0,e=0,n=!1;return{mousedown:function(r){return r.ctrlKey?(r.preventDefault(),t=r.clientX,e=r.clientY,n=!0,new h.HandlerResult(null,!1)):new h.HandlerResult(null,!0)},mouseup:function(t){return n?(t.preventDefault(),n=!1,new h.HandlerResult(null,!1)):new h.HandlerResult(null,!0)},mousemove:function(r,i,o){return n?r.ctrlKey?(r.preventDefault(),o.zoom(t,e,t-r.clientX,e-r.clientY,0),t=r.clientX,e=r.clientY,new h.HandlerResult(null,!1)):(t=r.clientX,e=r.clientY,n=!1,r.preventDefault(),new h.HandlerResult(null,!0)):new h.HandlerResult(null,!0)},wheel:function(t,e,n){if(!t.ctrlKey)return new h.HandlerResult(null,!0);t.preventDefault();var r=0;return 0>t.deltaY?r=50:0<t.deltaY&&(r=-50),n.zoom(t.clientX,t.clientY,0,0,r),new h.HandlerResult(null,!1)}}};var c=r(n(40)),f=n(22),h=n(61),d=e.StageAlreadyComposing=function(t){function e(){return(0,u.default)(this,e),(0,a.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"Cannot start new compose before current one is finished"))}return(0,l.default)(e,t),e}(c.default),p=e.StageAlreadyOpened=function(t){function e(){return(0,u.default)(this,e),(0,a.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"Stage already been opened, cannot open another one"))}return(0,l.default)(e,t),e}(c.default),v=(e.drawPath=1,e.drawLine=2,e.drawRect=3,e.drawEllipse=4,e.Background=function(){function t(e,n,r){(0,u.default)(this,t),(0,f.assertType)(e,"string"),(0,f.assertType)(n,"number"),(0,f.assertType)(r,"number"),this.url=e,this.w=n,this.h=r}return(0,o.default)(t,[{key:"URL",value:function(){return this.url}},{key:"width",value:function(){return this.w}},{key:"height",value:function(){return this.h}},{key:"ratio",value:function(){return this.w/this.h}},{key:"zoom",value:function(t,e){var n=this.width()/t,r=this.height()/e;return n<r?{fit:r,fill:n}:{fit:n,fill:r}}},{key:"zoomable",value:function(t,e){return!(t>3*this.width()||t<.3*this.width()||e>3*this.height()||e<.3*this.height())}}]),t}(),e.Drawn=function(){function t(e){(0,u.default)(this,t),this.drawn=e}return(0,o.default)(t,[{key:"element",value:function(){return this.drawn.element()}},{key:"remove",value:function(){return this.drawn.remove()}},{key:"set",value:function(t){return this.drawn.set(t)}},{key:"dimension",value:function(){var t=this.drawn.dimension();return{x:t.x,y:t.y,width:t.width,height:t.height}}},{key:"data",value:function(){return{type:this.drawn.type(),data:this.drawn.data()}}}]),t}()),y=e.Opened=function(){function t(e,n,r){(0,u.default)(this,t),this.stage=e,this.ctl=new h.UserCtl(this.stage.element(),r),this.controls=n,this.drawing=!1,this.events=r,this.ctl.listens(this.controls,this)}return(0,o.default)(t,[{key:"reset",value:function(){return this.stage.driver.reset()}},{key:"zoom",value:function(t,e,n,r,i){return this.stage.driver.zoom(t,e,n,r,i)}},{key:"insert",value:function(t,e,n){return this.stage.driver.insert(t,e,n)}},{key:"compose",value:function(t,e,n){var r=this;if(this.drawing)throw new d;return(0,f.assertType)(t,"object"),(0,f.assertType)(e,"function"),this.drawing=!0,new i.default(function(i,o){var s=!1,u=function(){return!!s||(s=!0,!1)},a=function(t){if(!u())return r.drawing=!1,r.events.fire("stage.compose.failed",t),o(t)};try{r.events.fire("stage.compose",null),r.stage.driver.compose(function(t){if(!u()){r.drawing||t.remove(),r.drawing=!1;var e=new v(t);return r.events.fire("stage.compose.completed",e),i(e)}},a,r.ctl,t,e,n)}catch(t){a(t)}})}},{key:"close",value:function(){this.ctl.removes(this.controls),this.drawing=!1,this.stage.opened=null,this.stage.clear(),this.events.fire("stage.closed",this.opened)}}]),t}();e.Stage=function(){function t(e,n){(0,u.default)(this,t),this.driver=e,this.events=n,this.opened=null}return(0,o.default)(t,[{key:"element",value:function(){return this.driver.element()}},{key:"open",value:function(t,e,n,r,i){var o=this;if(this.opened)throw new p;return this.opened=new y(this,r,this.events),this.driver.background(t,function(){e(o.opened),o.events.fire("stage.open.successful",o.opened)},function(t){o.opened=null,n(t),o.events.fire("stage.open.failed",t)},i)}},{key:"clear",value:function(){return this.opened&&(this.opened.close(),this.opened=null),this.driver.clear()}},{key:"teardown",value:function(){return this.clear(),this.driver.teardown()}},{key:"refit",value:function(){return this.driver.refit()}}]),t}()},function(){},function(t,e,n){"use strict";var r=n(65)(!0);n(44)(String,"String",function(t){this._t=t+"",this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var r=n(14),i=n(3),o=n(46),s=n(9),u=n(17),a=n(66),l=n(26),c=n(50),f=n(2)("iterator"),h=!([].keys&&"next"in[].keys()),d="keys",p="values",v=function(){return this};t.exports=function(t,e,n,y,g,m,w){a(n,e,y);var _,x,b,P=function(t){return!h&&t in S?S[t]:function(){return new n(this,t)}},k=e+" Iterator",E=g==p,O=!1,S=t.prototype,M=S[f]||S["@@iterator"]||g&&S[g],L=M||P(g),j=g?E?P("entries"):L:void 0,R="Array"==e&&S.entries||M;if(R&&((b=c(R.call(new t)))!==Object.prototype&&b.next&&(l(b,k,!0),!r&&"function"!=typeof b[f]&&s(b,f,v))),E&&M&&M.name!==p&&(O=!0,L=function(){return M.call(this)}),(!r||w)&&(h||O||!S[f])&&s(S,f,L),u[e]=L,u[k]=v,g)if(_={values:E?L:P(p),keys:m?L:P(d),entries:j},w)for(x in _)x in S||o(S,x,_[x]);else i(i.P+i.F*(h||O),e,_);return _}},function(t,e,n){t.exports=!n(8)&&!n(16)(function(){return 7!=Object.defineProperty(n(29)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=n(9)},function(t,e,n){var r=n(10),i=n(12),o=n(69)(!1),s=n(33)("IE_PROTO");t.exports=function(t,e){var n,u=i(t),a=0,l=[];for(n in u)n!=s&&r(u,n)&&l.push(n);for(;e.length>a;)r(u,n=e[a++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){var r=n(27),i=Math.min;t.exports=function(t){return 0<t?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(0).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(10),i=n(51),o=n(33)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var r=n(28);t.exports=function(t){return Object(r(t))}},function(t,e,n){n(71);for(var r=n(0),i=n(9),o=n(17),s=n(2)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),a=0;a<u.length;a++){var l=u[a],c=r[l],f=c&&c.prototype;f&&!f[s]&&i(f,s,l),o[l]=o.Array}},function(t,e,n){var r=n(18),i=n(2)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(e){}}(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var r=n(4),i=n(23),o=n(2)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||null==(n=r(s)[o])?e:i(n)}},function(t,e,n){var r,i,o,s=n(15),u=n(80),a=n(49),l=n(29),c=n(0),f=c.process,h=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,y=0,g={},m="onreadystatechange",w=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},_=function(t){w.call(t.data)};h&&d||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++y]=function(){u("function"==typeof t?t:Function(t),e)},r(y),y},d=function(t){delete g[t]},"process"==n(18)(f)?r=function(t){f.nextTick(s(w,t,1))}:v&&v.now?r=function(t){v.now(s(w,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=_,r=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",_,!1)):r=m in l("script")?function(t){a.appendChild(l("script"))[m]=function(){a.removeChild(this),w.call(t)}}:function(t){setTimeout(s(w,t,1),0)}),t.exports={set:h,clear:d}},function(t){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(4),i=n(7),o=n(36);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(47),i=n(35).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(39),i=n(24),o=n(12),s=n(30),u=n(10),a=n(45),l=Object.getOwnPropertyDescriptor;e.f=n(8)?l:function(t,e){if(t=o(t),e=s(e,!0),a)try{return l(t,e)}catch(e){}return u(t,e)?i(!r.f.call(t,e),t[e]):void 0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.UserCtl=e.HandlerResult=void 0;var i=r(n(13)),o=r(n(11)),s=r(n(5)),u=n(22),a=e.HandlerResult=function t(e,n){(0,s.default)(this,t),this.context=e,this.continue=n};e.UserCtl=function(){function t(e,n){(0,s.default)(this,t),this.el=e,this.events=n,this.listeners={}}return(0,o.default)(t,[{key:"listens",value:function(t,e){var n=this,r=this,o=function(o){return"function"==typeof t[o]?0===o.indexOf("_")?"continue":("object"!==(0,i.default)(n.listeners[o])&&(n.listeners[o]={handler:function(t){var e;for(var i in n.events.fire("control.firing",o),r.listeners[o].listeners){var s=r.listeners[o].listeners[i].handler(t,e,r.listeners[o].listeners[i].data);if((0,u.assertObjectType)(s,a),!s.continue)return void n.events.fire("control.fired",o);e=s.context}n.events.fire("control.fired",o)},listeners:[]},n.el.addEventListener(o,n.listeners[o].handler)),void n.listeners[o].listeners.push({handler:t[o],data:e})):"continue"};for(var s in t)o(s)}},{key:"removes",value:function(t){for(var e in t)if("function"==typeof t[e]&&0!==e.indexOf("_")&&"object"===(0,i.default)(this.listeners[e])){for(var n in this.listeners[e].listeners)if(this.listeners[e].listeners[n].handler===t[e]){this.listeners[e].listeners.splice(n,1);break}0<this.listeners[e].listeners.length||(this.el.removeEventListener(e,this.listeners[e].handler),delete this.listeners[e])}}},{key:"teardown",value:function(){for(var t in this.listeners)this.el.removeEventListener(t,this.listeners[t].handler);this.listeners={}}}]),t}()},function(t,e,n){t.exports={default:n(64),__esModule:!0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Composer=void 0;var i=r(n(5)),o=r(n(11));e.Composer=function(){function t(e){(0,i.default)(this,t),this.svg=e,this.plots=[],this.path=null}return(0,o.default)(t,[{key:"element",value:function(){return this.path}},{key:"set",value:function(t){return this.path?this.svg.setElement(this.path,t):void 0}},{key:"setPathElement",value:function(t){this.path=t}},{key:"hasPathElement",value:function(){return!!this.path}},{key:"convertPos",value:function(t,e){return t*=this.svg.zoomLevel,e*=this.svg.zoomLevel,{x:t+=this.svg.panX,y:e+=this.svg.panY}}},{key:"dimension",value:function(){if(0>=this.plots.length)return{x:0,y:0,width:0,height:0};for(var t=this.svg.rect(),e=this.plots[0].x,n=this.plots[0].y,r=this.plots[0].x,i=this.plots[0].y,o=1;o<this.plots.length;o++)this.plots[o].x>e&&(e=this.plots[o].x),this.plots[o].y>n&&(n=this.plots[o].y),this.plots[o].x<r&&(r=this.plots[o].x),this.plots[o].y<i&&(i=this.plots[o].y);return{x:t.x+(r-this.svg.panX)/this.svg.zoomLevel,y:t.y+(i-this.svg.panY)/this.svg.zoomLevel,width:(e-r)/this.svg.zoomLevel,height:(n-i)/this.svg.zoomLevel}}},{key:"data",value:function(){return this.plots}},{key:"remove",value:function(){return this.path?this.svg.removeDrawing(this.path):void 0}}]),t}()},function(t,e,n){n(42),n(43),n(52),n(74),n(86),n(87),t.exports=n(1).Promise},function(t,e,n){var r=n(27),i=n(28);t.exports=function(t){return function(e,n){var o,s,u=i(e)+"",a=r(n),l=u.length;return 0>a||a>=l?t?"":void 0:55296>(o=u.charCodeAt(a))||56319<o||a+1===l||56320>(s=u.charCodeAt(a+1))||57343<s?t?u.charAt(a):o:t?u.slice(a,a+2):s-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(31),i=n(24),o=n(26),s={};n(9)(s,n(2)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(6),i=n(4),o=n(32);t.exports=n(8)?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),u=s.length,a=0;u>a;)r.f(t,n=s[a++],e[n]);return t}},function(t,e,n){var r=n(18);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(12),i=n(48),o=n(70);t.exports=function(t){return function(e,n,s){var u,a=r(e),l=i(a.length),c=o(s,l);if(t&&n!=n){for(;l>c;)if((u=a[c++])!=u)return!0}else for(;l>c;c++)if((t||c in a)&&a[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var r=n(27),i=Math.max,o=Math.min;t.exports=function(t,e){return 0>(t=r(t))?i(t+e,0):o(t,e)}},function(t,e,n){"use strict";var r=n(72),i=n(73),o=n(17),s=n(12);t.exports=n(44)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t){t.exports=function(){}},function(t){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r,i,o,s,u=n(14),a=n(0),l=n(15),c=n(53),f=n(3),h=n(7),d=n(23),p=n(75),v=n(76),y=n(54),g=n(55).set,m=n(81)(),w=n(36),_=n(56),x=n(82),b=n(57),P="Promise",k=a.TypeError,E=a.process,O=E&&E.versions,S=O&&O.v8||"",M=a[P],L="process"==c(E),j=function(){},R=i=w.f,C=!!function(){try{var t=M.resolve(1),e=(t.constructor={})[n(2)("species")]=function(t){t(j,j)};return(L||"function"==typeof PromiseRejectionEvent)&&t.then(j)instanceof e&&0!==S.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(e){}}(),T=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},D=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var r=t._v,i=1==t._s,o=0,s=function(e){var n,o,s,u=i?e.ok:e.fail,a=e.resolve,l=e.reject,c=e.domain;try{u?(!i&&(2==t._h&&N(t),t._h=1),!0===u?n=r:(c&&c.enter(),n=u(r),c&&(c.exit(),s=!0)),n===e.promise?l(k("Promise-chain cycle")):(o=T(n))?o.call(n,a,l):a(n)):l(r)}catch(e){c&&!s&&c.exit(),l(e)}};n.length>o;)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&z(t)})}},z=function(t){g.call(a,function(){var e,n,r,i=t._v,o=A(t);if(o&&(e=_(function(){L?E.emit("unhandledRejection",i,t):(n=a.onunhandledrejection)?n({promise:t,reason:i}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=L||A(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},A=function(t){return 1!==t._h&&0===(t._a||t._c).length},N=function(t){g.call(a,function(){var e;L?E.emit("rejectionHandled",t):(e=a.onrejectionhandled)&&e({promise:t,reason:t._v})})},F=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,!e._a&&(e._a=e._c.slice()),D(e,!0))},I=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw k("Promise can't be resolved itself");(e=T(t))?m(function(){var r={_w:n,_d:!1};try{e.call(t,l(I,r,1),l(F,r,1))}catch(t){F.call(r,t)}}):(n._v=t,n._s=1,D(n,!1))}catch(e){F.call({_w:n,_d:!1},e)}}};C||(M=function(t){p(this,M,P,"_h"),d(t),r.call(this);try{t(l(I,this,1),l(F,this,1))}catch(t){F.call(this,t)}},(r=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(83)(M.prototype,{then:function(t,e){var n=R(y(this,M));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=L?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=l(I,t,1),this.reject=l(F,t,1)},w.f=R=function(t){return t===M||t===s?new o(t):i(t)}),f(f.G+f.W+f.F*!C,{Promise:M}),n(26)(M,P),n(84)(P),s=n(1)[P],f(f.S+f.F*!C,P,{reject:function(t){var e=R(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(u||!C),P,{resolve:function(t){return b(u&&this===s?M:this,t)}}),f(f.S+f.F*!(C&&n(85)(function(t){M.all(t).catch(j)})),P,{all:function(t){var e=this,n=R(e),r=n.resolve,i=n.reject,o=_(function(){var n=[],o=0,s=1;v(t,!1,function(t){var u=o++,a=!1;n.push(void 0),s++,e.resolve(t).then(function(t){a||(a=!0,n[u]=t,--s||r(n))},i)}),--s||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=R(e),r=n.reject,i=_(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(15),i=n(77),o=n(78),s=n(4),u=n(48),a=n(79),l={},c={};(e=t.exports=function(t,e,n,f,h){var d,p,v,y,g=h?function(){return t}:a(t),m=r(n,f,e?2:1),w=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(d=u(t.length);d>w;w++)if((y=e?m(s(p=t[w])[0],p[1]):m(t[w]))===l||y===c)return y}else for(v=g.call(t);!(p=v.next()).done;)if((y=i(v,m,p.value,e))===l||y===c)return y}).BREAK=l,e.RETURN=c},function(t,e,n){var r=n(4);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(n){var o=t.return;throw void 0!==o&&r(o.call(t)),n}}},function(t,e,n){var r=n(17),i=n(2)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(53),i=n(2)("iterator"),o=n(17);t.exports=n(1).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(0),i=n(55).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,u=r.Promise,a="process"==n(18)(s);t.exports=function(){var t,e,n,l=function(){var r,i;for(a&&(r=s.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(i){throw t?n():e=void 0,i}}e=void 0,r&&r.enter()};if(a)n=function(){s.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(u&&u.resolve){var c=u.resolve(void 0);n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var f=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){var r=n(0).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){var r=n(9);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(6),s=n(8),u=n(2)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];s&&e&&!e[u]&&o.f(e,u,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(2)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},t(o)}catch(e){}return n}},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(0),s=n(54),u=n(57);r(r.P+r.R,"Promise",{finally:function(t){var e=s(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return u(e,t()).then(function(){return n})}:t,n?function(n){return u(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(3),i=n(36),o=n(56);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){t.exports={default:n(89),__esModule:!0}},function(t,e,n){n(90);var r=n(1).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(3);r(r.S+r.F*!n(8),"Object",{defineProperty:n(6).f})},function(t,e,n){t.exports={default:n(92),__esModule:!0}},function(t,e,n){n(43),n(52),t.exports=n(37).f("iterator")},function(t,e,n){t.exports={default:n(94),__esModule:!0}},function(t,e,n){n(95),n(42),n(100),n(101),t.exports=n(1).Symbol},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(8),s=n(3),u=n(46),a=n(96).KEY,l=n(16),c=n(34),f=n(26),h=n(25),d=n(2),p=n(37),v=n(38),y=n(97),g=n(98),m=n(4),w=n(7),_=n(12),x=n(30),b=n(24),P=n(31),k=n(99),E=n(60),O=n(6),S=n(32),M=E.f,L=O.f,j=k.f,R=r.Symbol,C=r.JSON,T=C&&C.stringify,D="prototype",z=d("_hidden"),A=d("toPrimitive"),N={}.propertyIsEnumerable,F=c("symbol-registry"),I=c("symbols"),H=c("op-symbols"),G=Object[D],X="function"==typeof R,Y=r.QObject,U=!Y||!Y[D]||!Y[D].findChild,V=o&&l(function(){return 7!=P(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=M(G,e);r&&delete G[e],L(t,e,n),r&&t!==G&&L(G,e,r)}:L,B=function(t){var e=I[t]=P(R[D]);return e._k=t,e},W=X&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},K=function(t,e,n){return t===G&&K(H,e,n),m(t),e=x(e,!0),m(n),i(I,e)?(n.enumerable?(i(t,z)&&t[z][e]&&(t[z][e]=!1),n=P(n,{enumerable:b(0,!1)})):(!i(t,z)&&L(t,z,b(1,{})),t[z][e]=!0),V(t,e,n)):L(t,e,n)},Z=function(t,e){m(t);for(var n,r=y(e=_(e)),i=0,o=r.length;o>i;)K(t,n=r[i++],e[n]);return t},J=function(t){var e=N.call(this,t=x(t,!0));return(this!==G||!i(I,t)||i(H,t))&&(!(e||!i(this,t)||!i(I,t)||i(this,z)&&this[z][t])||e)},q=function(t,e){if(t=_(t),e=x(e,!0),t!==G||!i(I,e)||i(H,e)){var n=M(t,e);return n&&i(I,e)&&!(i(t,z)&&t[z][e])&&(n.enumerable=!0),n}},Q=function(t){for(var e,n=j(_(t)),r=[],o=0;n.length>o;)i(I,e=n[o++])||e==z||e==a||r.push(e);return r},$=function(t){for(var e,n=t===G,r=j(n?H:_(t)),o=[],s=0;r.length>s;)i(I,e=r[s++])&&(!n||i(G,e))&&o.push(I[e]);return o};X||(u((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var t=h(0<arguments.length?arguments[0]:void 0),e=function(n){this===G&&e.call(H,n),i(this,z)&&i(this[z],t)&&(this[z][t]=!1),V(this,t,b(1,n))};return o&&U&&V(G,t,{configurable:!0,set:e}),B(t)})[D],"toString",function(){return this._k}),E.f=q,O.f=K,n(59).f=k.f=Q,n(39).f=J,n(58).f=$,o&&!n(14)&&u(G,"propertyIsEnumerable",J,!0),p.f=function(t){return B(d(t))}),s(s.G+s.W+s.F*!X,{Symbol:R});for(var tt=["hasInstance","isConcatSpreadable","iterator","match","replace","search","species","split","toPrimitive","toStringTag","unscopables"],et=0;tt.length>et;)d(tt[et++]);for(var nt=S(d.store),rt=0;nt.length>rt;)v(nt[rt++]);s(s.S+s.F*!X,"Symbol",{for:function(t){return i(F,t+="")?F[t]:F[t]=R(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){U=!0},useSimple:function(){U=!1}}),s(s.S+s.F*!X,"Object",{create:function(t,e){return void 0===e?P(t):Z(P(t),e)},defineProperty:K,defineProperties:Z,getOwnPropertyDescriptor:q,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),C&&s(s.S+s.F*(!X||l(function(){var t=R();return"[null]"!=T([t])||"{}"!=T({a:t})||"{}"!=T(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(w(e)||void 0!==t)&&!W(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!W(e))return e}),r[1]=e,T.apply(C,r)}}),R[D][A]||n(9)(R[D],A,R[D].valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){var r=n(25)("meta"),i=n(7),o=n(10),s=n(6).f,u=0,a=Object.isExtensible||function(){return!0},l=!n(16)(function(){return a(Object.preventExtensions({}))}),c=function(t){s(t,r,{value:{i:"O"+ ++u,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!a(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!a(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return l&&f.NEED&&a(t)&&!o(t,r)&&c(t),t}}},function(t,e,n){var r=n(32),i=n(58),o=n(39);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var s,u=n(t),a=o.f,l=0;u.length>l;)a.call(t,s=u[l++])&&e.push(s);return e}},function(t,e,n){var r=n(18);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(12),i=n(59).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return s.slice()}}(t):i(r(t))}},function(t,e,n){n(38)("asyncIterator")},function(t,e,n){n(38)("observable")},function(t,e,n){n(103),t.exports=n(1).Object.getPrototypeOf},function(t,e,n){var r=n(51),i=n(50);n(104)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(3),i=n(1),o=n(16);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",s)}},function(t,e,n){t.exports={default:n(106),__esModule:!0}},function(t,e,n){n(107),t.exports=n(1).Object.setPrototypeOf},function(t,e,n){var r=n(3);r(r.S,"Object",{setPrototypeOf:n(108).set})},function(t,e,n){var r=n(7),i=n(4),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(15)(Function.call,n(60).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(110),__esModule:!0}},function(t,e,n){n(111);var r=n(1).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(3);r(r.S,"Object",{create:n(31)})},,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.SVG=e.UnsupportedComposeTypeException=e.CannotStartNewDrawWhileDrawing=e.ElementCreationFailedException=e.MissingSVGRootElementException=e.ParentElementMustBeAHTMLElement=e.ParentElementNotFoundException=e.UnsupportedException=e.UnsupportMessage=e.XMLNGLink=e.XMLNS=e.XMLNG=e.Version=e.Feature=void 0;var i=r(n(11)),o=r(n(13)),s=r(n(19)),u=r(n(5)),a=r(n(20)),l=r(n(21));e.defaultDrawingControl=function(){function t(t,e){var n=e.svg.rect();return{x:t.clientX-n.left,y:t.clientY-n.top}}return{mousedown:function(e,n,r){var i=t(e,r);return r.start(i.x,i.y),new d.HandlerResult(n,!0)},mouseup:function(e,n,r){var i=t(e,r);return r.done(i.x,i.y),new d.HandlerResult(n,!0)},mousemove:function(e,n,r){var i=t(e,r);return r.draw(i.x,i.y),new d.HandlerResult(n,!0)}}};var c=r(n(40)),f=n(22),h=n(41),d=n(61),p=n(116),v=n(117),y=n(118),g=n(119),m=e.Feature="http://www.w3.org/TR/SVG11/feature#Image",w=e.Version="1.1",_=e.XMLNG="http://www.w3.org/2000/svg",x=e.XMLNS="http://www.w3.org/2000/xmlns/",b=e.XMLNGLink="http://www.w3.org/1999/xlink",P=e.UnsupportMessage="This image is unsupported by your browser",k=e.UnsupportedException=function(t){function e(){return(0,u.default)(this,e),(0,a.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"SVG is unsupported in current context"))}return(0,l.default)(e,t),e}(c.default),E=e.ParentElementNotFoundException=function(t){function e(t){return(0,u.default)(this,e),(0,a.default)(this,(e.__proto__||(0,s.default)(e)).call(this,'Parent Element "'+t+'" was not found in the context'))}return(0,l.default)(e,t),e}(c.default),O=e.ParentElementMustBeAHTMLElement=function(t){function e(t,n){return(0,u.default)(this,e),(0,a.default)(this,(e.__proto__||(0,s.default)(e)).call(this,'Parent Element "'+t+'" is a "'+(void 0===n?"undefined":(0,o.default)(n))+'" rather than expected HTMLDOMElement'))}return(0,l.default)(e,t),e}(c.default),S=e.MissingSVGRootElementException=function(t){function e(){return(0,u.default)(this,e),(0,a.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"Missing SVG Root element in current context"))}return(0,l.default)(e,t),e}(c.default),M=e.ElementCreationFailedException=function(t){function e(t){return(0,u.default)(this,e),(0,a.default)(this,(e.__proto__||(0,s.default)(e)).call(this,'Failed to create "'+t+'" SVG element'))}return(0,l.default)(e,t),e}(c.default),L=(e.CannotStartNewDrawWhileDrawing=function(t){function e(){return(0,u.default)(this,e),(0,a.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"Cannot start a new draw while drawing"))}return(0,l.default)(e,t),e}(c.default),e.UnsupportedComposeTypeException=function(t){function e(t){return(0,u.default)(this,e),(0,a.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"Unsupported Compose Type: "+t))}return(0,l.default)(e,t),e}(c.default)),j=function(){function t(e,n,r,i,o){var s=this;(0,u.default)(this,t),this.element=e.newElement("image",{"xlink:href":n.URL(),x:0,y:0,height:n.height()+"px",width:n.width()+"px","pointer-events":"none"}),o?(this.element.addEventListener("load",function(){r(s)}),this.element.addEventListener("error",function(t){i(t)})):r(this),this.background=n,this.svg=e,this.reset()}return(0,i.default)(t,[{key:"reset",value:function(){var t=this.svg.rect(),e=this.background.zoom(t.width,t.height).fit;(1>e||this.background.zoomable(t.width,t.height))&&(e=1);var n=-(t.width-this.background.width()/e)/2*e,r=-(t.height-this.background.height()/e)/2*e;t.width,this.background.width(),t.height,this.background.height();this.svg.panTo(n,r,e)}},{key:"width",value:function(){return this.background.width()}},{key:"height",value:function(){return this.background.height()}},{key:"zoom",value:function(t,e){return this.background.zoom(t,e)}},{key:"zoomable",value:function(t,e){return this.background.zoomable(t,e)}},{key:"remove",value:function(){this.element.parentNode.removeChild(this.element),this.svg.resetZoom(!0)}}]),t}(),R={"xmlns:xlink":b,version:w,width:0,height:0,viewBox:"0 0 0 0",style:"margin: 0; padding: 0; display: block",preserveAspectRatio:"none"},C=function(){function t(e){if((0,u.default)(this,t),!window.document.implementation.hasFeature(m,w))throw new k;if(this.parent=document.getElementById(e),!this.parent)throw new E(e);if(!(0,f.isHTMLElement)(this.parent))throw new O(e,this.parent);this.zoomLevel=1,this.panX=0,this.panY=0,this.parentRect={},this.container=this.newElement("svg",R),this.message=document.createTextNode(P),this.target=this.newElement("g",{}),this.container.appendChild(this.target),this.container.appendChild(this.message),this.parent.appendChild(this.container),this.picture=null,this.drawings=[],this.fitResync(function(){return!0})}return(0,i.default)(t,[{key:"teardown",value:function(){this.clear(),this.target.parentNode.removeChild(this.target),this.message.parentNode.removeChild(this.message),this.container.parentNode.removeChild(this.container),this.picture=null,this.target=null,this.message=null,this.container=null,this.parent=null}},{key:"element",value:function(){return this.container}},{key:"clear",value:function(){for(var t in this.picture&&(this.picture.remove(),this.picture=null),this.drawings)this.target.removeChild(this.drawings[t]);this.drawings=[]}},{key:"panTo",value:function(t,e,n){0>=this.zoomLevel||(this.panX=t,this.panY=e,this.zoomLevel=n,this.fitResync(function(){return!0}))}},{key:"zoom",value:function(t,e,n,r,i){if(this.picture){var o=this.rect();if(!(0>=o.width||0>=o.height)){if(!i)return this.panX+=n*this.zoomLevel,this.panY+=r*this.zoomLevel,void this.fitResync(function(){return!0});var s=this.picture.width()/this.zoomLevel+i,u=this.picture.height()/this.zoomLevel+i;if(0>=s||0>=u||!this.picture.zoomable(s,u))return this.panX+=n*this.zoomLevel,this.panY+=r*this.zoomLevel,void this.fitResync(function(){return!0});var a=this.picture.zoom(s,u).fill;if(a==this.zoomLevel)return this.panX+=n*this.zoomLevel,this.panY+=r*this.zoomLevel,void this.fitResync(function(){return!0});var l=(t-o.left)/o.width,c=(e-o.top)/o.height,f=o.width*this.zoomLevel-o.width*a,h=o.height*this.zoomLevel-o.height*a;this.zoomLevel=a,this.panX+=f*l,this.panY+=h*c,this.fitResync(function(){return!0})}}}},{key:"resetZoom",value:function(t){this.zoomLevel=1,this.panX=0,this.panY=0,this.fitResync(function(){return t})}},{key:"reset",value:function(){return this.picture?(this.resetZoom(!1),this.picture.reset()):this.resetZoom(!0)}},{key:"refit",value:function(){var t=this;this.fitResync(function(e){return t.zoom(0,0,(t.parentRect.width-e.width)/2,(t.parentRect.height-e.height)/2,0),!0})}},{key:"fitResync",value:function(t){var e=this.parent.getBoundingClientRect();if(t(e)){this.parentRect=e;var n=this.parentRect.width*this.zoomLevel,r=this.parentRect.height*this.zoomLevel;this.setElement(this.container,{width:this.parentRect.width+"px",height:this.parentRect.height+"px",viewBox:[this.panX,this.panY,n,r].join(" ")})}else this.parentRect=e}},{key:"rect",value:function(){return this.container.getBoundingClientRect()}},{key:"setElement",value:function(t,e){for(var n in e)0===n.indexOf("xlink:")?t.setAttributeNS(b,n,e[n]):0===n.indexOf("xmlns:")?t.setAttributeNS(x,n,e[n]):t.setAttribute(n,e[n])}},{key:"newElement",value:function(t,e){var n=document.createElementNS(_,t);if(!n)throw new M(t);return this.setElement(n,e),n}},{key:"background",value:function(t,e,n,r){this.picture&&(this.picture.remove(),this.picture=null);var i=new j(this,t,e,n,r);this.picture=i,this.target.appendChild(i.element)}},{key:"insertDrawing",value:function(t,e){if(!this.target)throw new S;var n=this.newElement("path",function(t,e){var n=(0,f.filterDefault)({stroke:"black","stroke-width":3,fill:"none",d:t},e);return n.d=t,n}(t,e));return this.target.appendChild(n),this.drawings.push(n),n}},{key:"removeDrawing",value:function(t){for(var e in this.drawings)if(this.drawings[e]==t)return this.target.removeChild(t),void this.drawings.splice(e,1)}},{key:"insert",value:function(t,e,n){switch(t){case h.drawPath:return new p.PathInserter(this,n,e);case h.drawLine:return new v.LineInserter(this,n,e);case h.drawRect:return new y.RectInserter(this,n,e);case h.drawEllipse:return new g.EllipseInserter(this,n,e);default:throw new L(t)}}},{key:"compose",value:function(t,e,n,r,i,o){switch(o){case h.drawPath:return new p.PathComposer(this,t,e,n,r,i);case h.drawLine:return new v.LineComposer(this,t,e,n,r,i);case h.drawRect:return new y.RectComposer(this,t,e,n,r,i);case h.drawEllipse:return new g.EllipseComposer(this,t,e,n,r,i);default:throw new L(o)}}}]),t}();e.SVG=C},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.PathComposer=e.PathInserter=void 0;var i=r(n(19)),o=r(n(5)),s=r(n(11)),u=r(n(20)),a=r(n(21)),l=n(22),c=n(41),f=function(t){function e(t,n){(0,o.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.properties=n,r}var n=Math.pow;return(0,a.default)(e,t),(0,s.default)(e,[{key:"type",value:function(){return c.drawPath}},{key:"savePathPoint",value:function(t,e){this.plots.push({x:t,y:e})}},{key:"buildDotPath",value:function(){var t="";if(0>=this.plots.length)return t;t+="M"+this.plots[0].x+","+this.plots[0].y;for(var e=1;e<this.plots.length;e++)t+=" L"+this.plots[e].x+","+this.plots[e].y;return t}},{key:"buildCurvePath",value:function(){var t="";if(0>=this.plots.length)return t;t+="M"+this.plots[0].x+","+this.plots[0].y+" Q";for(var e=null,n=(this.plots.length-1)%2,r=1;r<this.plots.length;r++)e=this.plots[r],t+=this.plots[r].x+","+this.plots[r].y+" ";for(var i=0;i<n;i++)t+=e.x+","+e.y+" ";return t.trim()}},{key:"pointDistance",value:function(t,e){return Math.sqrt(n(t.x-e.x,2)+n(t.y-e.y,2))}},{key:"angleOfCornerA",value:function(t,e,r,i){var o=this.pointDistance(r,i),s=this.pointDistance(i,e),u=(n(s,2)+n(t,2)-n(o,2))/(2*s*t);return 1<=u?0:Math.acos(u)}},{key:"compressPath",value:function(){if(!(3>this.plots.length))for(var t=0,e=null,n=null,r=1,i=0;t<this.plots.length;){if(e)if(n)this.angleOfCornerA(i,e,n,this.plots[t])<.08?this.plots.splice(r,1):(e=null,n=null);else n=this.plots[t],r=t,i=this.pointDistance(e,n),t++;else e=this.plots[t],t++}}}]),e}(n(63).Composer);e.PathInserter=function(t){function e(t,n,r){(0,o.default)(this,e);var s=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));return s.plots=n,s.setPathElement(s.svg.insertDrawing(s.buildDotPath(),s.properties)),s}return(0,a.default)(e,t),e}(f),e.PathComposer=function(t){function e(t,n,r,s,a,c){(0,o.default)(this,e);var f=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,a));return f.drawing=!1,f.resolve=n,f.reject=r,f.userctl=s,f.controls=c(),(0,l.assertType)(f.controls,"object"),f.userctl.listens(f.controls,f),f}return(0,a.default)(e,t),(0,s.default)(e,[{key:"start",value:function(t,e){if(!this.drawing){this.drawing=!0;var n=this.convertPos(t,e);this.savePathPoint(n.x,n.y),this.setPathElement(this.svg.insertDrawing(this.buildDotPath(),this.properties))}}},{key:"draw",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.savePathPoint(n.x,n.y),this.set({d:this.buildDotPath()})}}},{key:"done",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.savePathPoint(n.x,n.y),this.compressPath(),this.set({d:this.buildCurvePath()}),this.clear()}}},{key:"clear",value:function(){this.drawing=!1,this.userctl.removes(this.controls),this.resolve(this)}}]),e}(f)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.LineComposer=e.LineInserter=void 0;var i=r(n(19)),o=r(n(5)),s=r(n(11)),u=r(n(20)),a=r(n(21)),l=n(22),c=n(41),f=n(63),h=function(t){function e(t,n){(0,o.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.properties=n,r.path=null,r.plots=[{x:0,y:0},{x:0,y:0}],r}return(0,a.default)(e,t),(0,s.default)(e,[{key:"type",value:function(){return c.drawLine}},{key:"setStartPoint",value:function(t,e){this.plots[0]={x:t,y:e}}},{key:"setEndPoint",value:function(t,e){this.plots[1]={x:t,y:e}}},{key:"buildLinePath",value:function(){var t="";return 2===this.plots.length?(t+="M"+this.plots[0].x+","+this.plots[0].y,t+=" L"+this.plots[1].x+","+this.plots[1].y):t}}]),e}(f.Composer);e.LineInserter=function(t){function e(t,n,r){(0,o.default)(this,e);var s=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));return s.plots=n,s.setPathElement(s.svg.insertDrawing(s.buildLinePath(),s.properties)),s}return(0,a.default)(e,t),e}(h),e.LineComposer=function(t){function e(t,n,r,s,a,c){(0,o.default)(this,e);var f=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,a));return f.drawing=!1,f.resolve=n,f.reject=r,f.userctl=s,f.controls=c(),(0,l.assertType)(f.controls,"object"),f.userctl.listens(f.controls,f),f}return(0,a.default)(e,t),(0,s.default)(e,[{key:"start",value:function(t,e){if(!this.drawing){this.drawing=!0;var n=this.convertPos(t,e);this.setStartPoint(n.x,n.y),this.setEndPoint(n.x,n.y),this.setPathElement(this.svg.insertDrawing(this.buildLinePath(),this.properties))}}},{key:"draw",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.setEndPoint(n.x,n.y),this.set({d:this.buildLinePath()})}}},{key:"done",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.setEndPoint(n.x,n.y),this.set({d:this.buildLinePath()}),this.clear()}}},{key:"clear",value:function(){this.drawing=!1,this.userctl.removes(this.controls),this.resolve(this)}}]),e}(h)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.RectComposer=e.RectInserter=void 0;var i=r(n(19)),o=r(n(5)),s=r(n(11)),u=r(n(20)),a=r(n(21)),l=n(22),c=n(41),f=n(63),h=function(t){function e(t,n){(0,o.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.properties=n,r.path=null,r.plots=[{x:0,y:0},{x:0,y:0}],r}return(0,a.default)(e,t),(0,s.default)(e,[{key:"type",value:function(){return c.drawRect}},{key:"setStartPoint",value:function(t,e){this.plots[0]={x:t,y:e}}},{key:"setEndPoint",value:function(t,e){this.plots[1]={x:t,y:e}}},{key:"buildRectPath",value:function(){var t="";return 2===this.plots.length?(t+="M"+this.plots[0].x+","+this.plots[0].y,t+=" L"+this.plots[1].x+","+this.plots[0].y,t+=" L"+this.plots[1].x+","+this.plots[1].y,t+=" L"+this.plots[0].x+","+this.plots[1].y,t+=" L"+this.plots[0].x+","+this.plots[0].y,t+=" Z"):t}}]),e}(f.Composer);e.RectInserter=function(t){function e(t,n,r){(0,o.default)(this,e);var s=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));return s.plots=n,s.setPathElement(s.svg.insertDrawing(s.buildRectPath(),s.properties)),s}return(0,a.default)(e,t),e}(h),e.RectComposer=function(t){function e(t,n,r,s,a,c){(0,o.default)(this,e);var f=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,a));return f.drawing=!1,f.resolve=n,f.reject=r,f.userctl=s,f.controls=c(),(0,l.assertType)(f.controls,"object"),f.userctl.listens(f.controls,f),f}return(0,a.default)(e,t),(0,s.default)(e,[{key:"start",value:function(t,e){if(!this.drawing){this.drawing=!0;var n=this.convertPos(t,e);this.setStartPoint(n.x,n.y),this.setEndPoint(n.x,n.y),this.setPathElement(this.svg.insertDrawing(this.buildRectPath(),this.properties))}}},{key:"draw",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.setEndPoint(n.x,n.y),this.set({d:this.buildRectPath()})}}},{key:"done",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.setEndPoint(n.x,n.y),this.set({d:this.buildRectPath()}),this.clear()}}},{key:"clear",value:function(){this.drawing=!1,this.userctl.removes(this.controls),this.resolve(this)}}]),e}(h)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.EllipseComposer=e.EllipseInserter=void 0;var i=r(n(19)),o=r(n(5)),s=r(n(11)),u=r(n(20)),a=r(n(21)),l=n(22),c=n(41),f=n(63),h=function(t){function e(t,n){(0,o.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.properties=n,r.path=null,r.plots=[{x:0,y:0},{x:0,y:0}],r}return(0,a.default)(e,t),(0,s.default)(e,[{key:"type",value:function(){return c.drawEllipse}},{key:"setStartPoint",value:function(t,e){this.plots[0]={x:t,y:e}}},{key:"setEndPoint",value:function(t,e){this.plots[1]={x:t,y:e}}},{key:"getStartPoint",value:function(){return{x:this.plots[1].x>this.plots[0].x?this.plots[0].x:this.plots[1].x,y:this.plots[1].y>this.plots[0].y?this.plots[0].y:this.plots[1].y}}},{key:"getEndPoint",value:function(){return{x:this.plots[1].x<=this.plots[0].x?this.plots[0].x:this.plots[1].x,y:this.plots[1].y<=this.plots[0].y?this.plots[0].y:this.plots[1].y}}},{key:"getRadius",value:function(t,e){return{x:e.x-t.x,y:e.y-t.y}}},{key:"buildEllipsePath",value:function(){var t="";if(2!==this.plots.length)return t;var e=this.getStartPoint(),n=this.getEndPoint(),r=this.getRadius(e,n),i=n.x-e.x,o=n.y-e.y,s=e.x+i/2,u=e.y+o/2,a=r.x/2,l=r.y/2;return t+="M"+(s-a)+","+u+" ",t+="a"+a+","+l+" 0 1,0 "+2*a+",0 ",t+="a"+a+","+l+" 0 1,0 -"+2*a+",0"}}]),e}(f.Composer);e.EllipseInserter=function(t){function e(t,n,r){(0,o.default)(this,e);var s=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));return s.plots=n,s.setPathElement(s.svg.insertDrawing(s.buildEllipsePath(),s.properties)),s}return(0,a.default)(e,t),e}(h),e.EllipseComposer=function(t){function e(t,n,r,s,a,c){(0,o.default)(this,e);var f=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,a));return f.drawing=!1,f.resolve=n,f.reject=r,f.userctl=s,f.controls=c(),(0,l.assertType)(f.controls,"object"),f.userctl.listens(f.controls,f),f}return(0,a.default)(e,t),(0,s.default)(e,[{key:"start",value:function(t,e){if(!this.drawing){this.drawing=!0;var n=this.convertPos(t,e);this.setStartPoint(n.x,n.y),this.setEndPoint(n.x,n.y),this.setPathElement(this.svg.insertDrawing(this.buildEllipsePath(),this.properties))}}},{key:"draw",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.setEndPoint(n.x,n.y),this.set({d:this.buildEllipsePath()})}}},{key:"done",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.setEndPoint(n.x,n.y),this.set({d:this.buildEllipsePath()}),this.clear()}}},{key:"clear",value:function(){this.drawing=!1,this.userctl.removes(this.controls),this.resolve(this)}}]),e}(h)}]);