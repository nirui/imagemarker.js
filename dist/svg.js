/*! imagemarker.js Copyright (C) 2019 Rui NI <ranqus@gmail.com> */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.svg=e():t.svg=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=115)}([function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(34)("wks"),i=n(25),o=n(0).Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(0),i=n(1),o=n(15),s=n(9),u=n(10),a=function(t,e,n){var l,c,f,h=t&a.F,p=t&a.G,d=t&a.S,v=t&a.P,y=t&a.B,g=t&a.W,m=p?i:i[e]||(i[e]={}),w=m.prototype,_=p?r:d?r[e]:(r[e]||{}).prototype;for(l in p&&(n=e),n)(c=!h&&_&&void 0!==_[l])&&u(m,l)||(f=c?_[l]:n[l],m[l]=p&&"function"!=typeof _[l]?n[l]:y&&c?o(f,r):g&&_[l]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):v&&"function"==typeof f?o(Function.call,f):f,v&&((m.virtual||(m.virtual={}))[l]=f,t&a.R&&w&&!w[l]&&s(w,l,f)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,n){var r=n(7);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){var r=n(4),i=n(45),o=n(30),s=Object.defineProperty;e.f=n(8)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(6),i=n(24);t.exports=n(8)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(88),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){var r=n(68),i=n(28);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";e.__esModule=!0;var r=s(n(91)),i=s(n(93)),o="function"==typeof i.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};function s(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof i.default&&"symbol"===o(r.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":void 0===t?"undefined":o(t)}},function(t,e){t.exports=!0},function(t,e,n){var r=n(23);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports={}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){t.exports={default:n(102),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(13),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,o.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";e.__esModule=!0;var r=s(n(105)),i=s(n(109)),o=s(n(13));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,o.default)(e)));t.prototype=(0,i.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UnexpectedTypeException=void 0;var r=l(n(13)),i=l(n(19)),o=l(n(5)),s=l(n(20)),u=l(n(21));e.assertType=function(t,e){if((void 0===t?"undefined":(0,r.default)(t))===e)return;throw new c(void 0===t?"undefined":(0,r.default)(t),e)},e.assertObjectType=function(t,e){if(t instanceof e)return;throw new c(void 0===t?"undefined":(0,r.default)(t),e)},e.isHTMLElement=function(t){return t&&(t instanceof HTMLDocument||"object"===(void 0===t?"undefined":(0,r.default)(t))&&1===t.nodeType)},e.filterDefault=function t(e,n){var i={};for(var o in e)i[o]=e[o];for(var s in n){if(void 0!==i[s]&&(0,r.default)(i[s])!==(0,r.default)(n[s]))throw new c((0,r.default)(n[s]),(0,r.default)(i[s]));"object"!==(0,r.default)(i[s])||i[s]instanceof Array?i[s]=n[s]:i[s]=t(i[s],n[s])}return i};var a=l(n(40));function l(t){return t&&t.__esModule?t:{default:t}}var c=e.UnexpectedTypeException=function(t){function e(t,n){return(0,o.default)(this,e),(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,'Expecting the type to be "'+n+'", got "'+t+'" instead'))}return(0,u.default)(e,t),e}(a.default)},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(6).f,i=n(10),o=n(2)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(7),i=n(0).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(7);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(4),i=n(67),o=n(35),s=n(33)("IE_PROTO"),u=function(){},a=function(){var t,e=n(29)("iframe"),r=o.length;for(e.style.display="none",n(49).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;r--;)delete a.prototype[o[r]];return a()};t.exports=Object.create||function(t,e){var n;return null!==t?(u.prototype=r(t),n=new u,u.prototype=null,n[s]=t):n=a(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(47),i=n(35);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(34)("keys"),i=n(25);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(1),i=n(0),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(14)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){"use strict";var r=n(23);function i(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},function(t,e,n){e.f=n(2)},function(t,e,n){var r=n(0),i=n(1),o=n(14),s=n(37),u=n(6).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||u(e,t,{value:s.f(t)})}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(5)),i=o(n(11));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,r.default)(this,t),this.message=e}return(0,i.default)(t,[{key:"toString",value:function(){return"[ImageMarker] "+this.message}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.Opened=e.Drawn=e.Background=e.drawEllipse=e.drawRect=e.drawLine=e.drawPath=e.StageAlreadyOpened=e.StageAlreadyComposing=void 0;var r=h(n(62)),i=h(n(11)),o=h(n(19)),s=h(n(5)),u=h(n(20)),a=h(n(21));e.defaultStageControl=function(){var t=0,e=0,n=!1;return{mousedown:function(r,i,o){return r.ctrlKey?(r.preventDefault(),t=r.clientX,e=r.clientY,n=!0,new f.HandlerResult(null,!1)):new f.HandlerResult(null,!0)},mouseup:function(t,e,r){return n?(t.preventDefault(),n=!1,new f.HandlerResult(null,!1)):new f.HandlerResult(null,!0)},mousemove:function(r,i,o){return n?r.ctrlKey?(r.preventDefault(),o.zoom(t,e,t-r.clientX,e-r.clientY,0),t=r.clientX,e=r.clientY,new f.HandlerResult(null,!1)):(t=r.clientX,e=r.clientY,n=!1,r.preventDefault(),new f.HandlerResult(null,!0)):new f.HandlerResult(null,!0)},wheel:function(t,e,n){if(!t.ctrlKey)return new f.HandlerResult(null,!0);t.preventDefault();var r=0;return t.deltaY<0?r=50:t.deltaY>0&&(r=-50),n.zoom(t.clientX,t.clientY,0,0,r),new f.HandlerResult(null,!1)}}};var l=h(n(40)),c=n(22),f=n(61);function h(t){return t&&t.__esModule?t:{default:t}}var p=e.StageAlreadyComposing=function(t){function e(){return(0,s.default)(this,e),(0,u.default)(this,(e.__proto__||(0,o.default)(e)).call(this,"Cannot start new compose before current one is finished"))}return(0,a.default)(e,t),e}(l.default),d=e.StageAlreadyOpened=function(t){function e(){return(0,s.default)(this,e),(0,u.default)(this,(e.__proto__||(0,o.default)(e)).call(this,"Stage already been opened, cannot open another one"))}return(0,a.default)(e,t),e}(l.default);e.drawPath=1,e.drawLine=2,e.drawRect=3,e.drawEllipse=4,e.Background=function(){function t(e,n,r){(0,s.default)(this,t),(0,c.assertType)(e,"string"),(0,c.assertType)(n,"number"),(0,c.assertType)(r,"number"),this.url=e,this.w=n,this.h=r}return(0,i.default)(t,[{key:"URL",value:function(){return this.url}},{key:"width",value:function(){return this.w}},{key:"height",value:function(){return this.h}},{key:"ratio",value:function(){return this.w/this.h}},{key:"zoom",value:function(t,e){var n=this.width()/t,r=this.height()/e;return n<r?{fit:r,fill:n}:{fit:n,fill:r}}},{key:"zoomable",value:function(t,e){return!(t>3*this.width()||t<.3*this.width())&&!(e>3*this.height()||e<.3*this.height())}}]),t}();var v=e.Drawn=function(){function t(e){(0,s.default)(this,t),this.drawn=e}return(0,i.default)(t,[{key:"element",value:function(){return this.drawn.element()}},{key:"remove",value:function(){this.drawn.remove()}},{key:"set",value:function(t){this.drawn.set(t)}},{key:"dimension",value:function(){var t=this.drawn.dimension();return{x:t.x,y:t.y,width:t.width,height:t.height}}},{key:"data",value:function(){return{type:this.drawn.type(),data:this.drawn.data()}}}]),t}(),y=e.Opened=function(){function t(e,n,r){(0,s.default)(this,t),this.stage=e,this.ctl=new f.UserCtl(this.stage.element(),r),this.controls=n,this.drawing=!1,this.events=r,this.ctl.listens(this.controls,this)}return(0,i.default)(t,[{key:"reset",value:function(){this.stage.driver.reset()}},{key:"zoom",value:function(t,e,n,r,i){this.stage.driver.zoom(t,e,n,r,i)}},{key:"insert",value:function(t,e,n){return new v(this.stage.driver.insert(t,e,n))}},{key:"compose",value:function(t,e,n){var i=this;if(this.drawing)throw new p;return(0,c.assertType)(t,"object"),(0,c.assertType)(e,"function"),this.drawing=!0,new r.default(function(r,o){var s=!1,u=function(){return!!s||(s=!0,!1)},a=function(t){if(!u())return i.drawing=!1,i.events.fire("stage.compose.failed",t),o(t)};try{i.events.fire("stage.compose",null),i.stage.driver.compose(function(t){if(!u()){i.drawing||t.remove(),i.drawing=!1;var e=new v(t);return i.events.fire("stage.compose.completed",e),r(e)}},a,i.ctl,t,e,n)}catch(t){a(t)}})}},{key:"close",value:function(){this.ctl.removes(this.controls),this.drawing=!1,this.stage.opened=null,this.stage.clear(),this.events.fire("stage.closed",this.opened)}}]),t}();e.Stage=function(){function t(e,n){(0,s.default)(this,t),this.driver=e,this.events=n,this.opened=null}return(0,i.default)(t,[{key:"element",value:function(){return this.driver.element()}},{key:"open",value:function(t,e,n,r,i){var o=this;if(this.opened)throw new d;this.opened=new y(this,r,this.events),this.driver.background(t,function(){e(o.opened),o.events.fire("stage.open.successful",o.opened)},function(t){o.opened=null,n(t),o.events.fire("stage.open.failed",t)},i)}},{key:"clear",value:function(){this.opened&&(this.opened.close(),this.opened=null),this.driver.clear()}},{key:"teardown",value:function(){this.clear(),this.driver.teardown()}},{key:"refit",value:function(){this.driver.refit()}}]),t}()},function(t,e){},function(t,e,n){"use strict";var r=n(65)(!0);n(44)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var r=n(14),i=n(3),o=n(46),s=n(9),u=n(17),a=n(66),l=n(26),c=n(50),f=n(2)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,v,y,g){a(n,e,d);var m,w,_,x=function(t){if(!h&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},b=e+" Iterator",P="values"==v,k=!1,E=t.prototype,S=E[f]||E["@@iterator"]||v&&E[v],O=S||x(v),M=v?P?x("entries"):O:void 0,j="Array"==e&&E.entries||S;if(j&&(_=c(j.call(new t)))!==Object.prototype&&_.next&&(l(_,b,!0),r||"function"==typeof _[f]||s(_,f,p)),P&&S&&"values"!==S.name&&(k=!0,O=function(){return S.call(this)}),r&&!g||!h&&!k&&E[f]||s(E,f,O),u[e]=O,u[b]=p,v)if(m={values:P?O:x("values"),keys:y?O:x("keys"),entries:M},g)for(w in m)w in E||o(E,w,m[w]);else i(i.P+i.F*(h||k),e,m);return m}},function(t,e,n){t.exports=!n(8)&&!n(16)(function(){return 7!=Object.defineProperty(n(29)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=n(9)},function(t,e,n){var r=n(10),i=n(12),o=n(69)(!1),s=n(33)("IE_PROTO");t.exports=function(t,e){var n,u=i(t),a=0,l=[];for(n in u)n!=s&&r(u,n)&&l.push(n);for(;e.length>a;)r(u,n=e[a++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){var r=n(27),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(0).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(10),i=n(51),o=n(33)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var r=n(28);t.exports=function(t){return Object(r(t))}},function(t,e,n){n(71);for(var r=n(0),i=n(9),o=n(17),s=n(2)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),a=0;a<u.length;a++){var l=u[a],c=r[l],f=c&&c.prototype;f&&!f[s]&&i(f,s,l),o[l]=o.Array}},function(t,e,n){var r=n(18),i=n(2)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var r=n(4),i=n(23),o=n(2)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||null==(n=r(s)[o])?e:i(n)}},function(t,e,n){var r,i,o,s=n(15),u=n(80),a=n(49),l=n(29),c=n(0),f=c.process,h=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,v=c.Dispatch,y=0,g={},m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},w=function(t){m.call(t.data)};h&&p||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++y]=function(){u("function"==typeof t?t:Function(t),e)},r(y),y},p=function(t){delete g[t]},"process"==n(18)(f)?r=function(t){f.nextTick(s(m,t,1))}:v&&v.now?r=function(t){v.now(s(m,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=w,r=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",w,!1)):r="onreadystatechange"in l("script")?function(t){a.appendChild(l("script")).onreadystatechange=function(){a.removeChild(this),m.call(t)}}:function(t){setTimeout(s(m,t,1),0)}),t.exports={set:h,clear:p}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(4),i=n(7),o=n(36);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(47),i=n(35).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(39),i=n(24),o=n(12),s=n(30),u=n(10),a=n(45),l=Object.getOwnPropertyDescriptor;e.f=n(8)?l:function(t,e){if(t=o(t),e=s(e,!0),a)try{return l(t,e)}catch(t){}if(u(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserCtl=e.HandlerResult=void 0;var r=u(n(13)),i=u(n(11)),o=u(n(5)),s=n(22);function u(t){return t&&t.__esModule?t:{default:t}}var a=e.HandlerResult=function t(e,n){(0,o.default)(this,t),this.context=e,this.continue=n};e.UserCtl=function(){function t(e,n){(0,o.default)(this,t),this.el=e,this.events=n,this.listeners={}}return(0,i.default)(t,[{key:"listens",value:function(t,e){var n=this,i=this,o=function(o){return"function"!=typeof t[o]?"continue":0===o.indexOf("_")?"continue":("object"!==(0,r.default)(n.listeners[o])&&(n.listeners[o]={handler:function(t){n.events.fire("control.firing",o);var e=void 0;for(var r in i.listeners[o].listeners){var u=i.listeners[o].listeners[r].handler(t,e,i.listeners[o].listeners[r].data);if((0,s.assertObjectType)(u,a),!u.continue)return void n.events.fire("control.fired",o);e=u.context}n.events.fire("control.fired",o)},listeners:[]},n.el.addEventListener(o,n.listeners[o].handler)),void n.listeners[o].listeners.push({handler:t[o],data:e}))};for(var u in t)o(u)}},{key:"removes",value:function(t){for(var e in t)if("function"==typeof t[e]&&0!==e.indexOf("_")&&"object"===(0,r.default)(this.listeners[e])){for(var n in this.listeners[e].listeners)if(this.listeners[e].listeners[n].handler===t[e]){this.listeners[e].listeners.splice(n,1);break}this.listeners[e].listeners.length>0||(this.el.removeEventListener(e,this.listeners[e].handler),delete this.listeners[e])}}},{key:"teardown",value:function(){for(var t in this.listeners)this.el.removeEventListener(t,this.listeners[t].handler);this.listeners={}}}]),t}()},function(t,e,n){t.exports={default:n(64),__esModule:!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Composer=void 0;var r=o(n(5)),i=o(n(11));function o(t){return t&&t.__esModule?t:{default:t}}e.Composer=function(){function t(e){(0,r.default)(this,t),this.svg=e,this.plots=[],this.path=null}return(0,i.default)(t,[{key:"element",value:function(){return this.path}},{key:"set",value:function(t){if(this.path)return this.svg.setElement(this.path,t)}},{key:"setPathElement",value:function(t){this.path=t}},{key:"hasPathElement",value:function(){return!!this.path}},{key:"convertPos",value:function(t,e){return t*=this.svg.zoomLevel,e*=this.svg.zoomLevel,{x:t+=this.svg.panX,y:e+=this.svg.panY}}},{key:"dimension",value:function(){if(this.plots.length<=0)return{x:0,y:0,width:0,height:0};for(var t=this.svg.rect(),e=this.plots[0].x,n=this.plots[0].y,r=this.plots[0].x,i=this.plots[0].y,o=1;o<this.plots.length;o++)this.plots[o].x>e&&(e=this.plots[o].x),this.plots[o].y>n&&(n=this.plots[o].y),this.plots[o].x<r&&(r=this.plots[o].x),this.plots[o].y<i&&(i=this.plots[o].y);return{x:t.x+(r-this.svg.panX)/this.svg.zoomLevel,y:t.y+(i-this.svg.panY)/this.svg.zoomLevel,width:(e-r)/this.svg.zoomLevel,height:(n-i)/this.svg.zoomLevel}}},{key:"data",value:function(){return this.plots}},{key:"remove",value:function(){if(this.path)return this.svg.removeDrawing(this.path)}}]),t}()},function(t,e,n){n(42),n(43),n(52),n(74),n(86),n(87),t.exports=n(1).Promise},function(t,e,n){var r=n(27),i=n(28);t.exports=function(t){return function(e,n){var o,s,u=String(i(e)),a=r(n),l=u.length;return a<0||a>=l?t?"":void 0:(o=u.charCodeAt(a))<55296||o>56319||a+1===l||(s=u.charCodeAt(a+1))<56320||s>57343?t?u.charAt(a):o:t?u.slice(a,a+2):s-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(31),i=n(24),o=n(26),s={};n(9)(s,n(2)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(6),i=n(4),o=n(32);t.exports=n(8)?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),u=s.length,a=0;u>a;)r.f(t,n=s[a++],e[n]);return t}},function(t,e,n){var r=n(18);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(12),i=n(48),o=n(70);t.exports=function(t){return function(e,n,s){var u,a=r(e),l=i(a.length),c=o(s,l);if(t&&n!=n){for(;l>c;)if((u=a[c++])!=u)return!0}else for(;l>c;c++)if((t||c in a)&&a[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var r=n(27),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){"use strict";var r=n(72),i=n(73),o=n(17),s=n(12);t.exports=n(44)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r,i,o,s,u=n(14),a=n(0),l=n(15),c=n(53),f=n(3),h=n(7),p=n(23),d=n(75),v=n(76),y=n(54),g=n(55).set,m=n(81)(),w=n(36),_=n(56),x=n(82),b=n(57),P=a.TypeError,k=a.process,E=k&&k.versions,S=E&&E.v8||"",O=a.Promise,M="process"==c(k),j=function(){},L=i=w.f,R=!!function(){try{var t=O.resolve(1),e=(t.constructor={})[n(2)("species")]=function(t){t(j,j)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(j)instanceof e&&0!==S.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(t){}}(),C=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},T=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var r=t._v,i=1==t._s,o=0,s=function(e){var n,o,s,u=i?e.ok:e.fail,a=e.resolve,l=e.reject,c=e.domain;try{u?(i||(2==t._h&&A(t),t._h=1),!0===u?n=r:(c&&c.enter(),n=u(r),c&&(c.exit(),s=!0)),n===e.promise?l(P("Promise-chain cycle")):(o=C(n))?o.call(n,a,l):a(n)):l(r)}catch(t){c&&!s&&c.exit(),l(t)}};n.length>o;)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&D(t)})}},D=function(t){g.call(a,function(){var e,n,r,i=t._v,o=z(t);if(o&&(e=_(function(){M?k.emit("unhandledRejection",i,t):(n=a.onunhandledrejection)?n({promise:t,reason:i}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=M||z(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},z=function(t){return 1!==t._h&&0===(t._a||t._c).length},A=function(t){g.call(a,function(){var e;M?k.emit("rejectionHandled",t):(e=a.onrejectionhandled)&&e({promise:t,reason:t._v})})},N=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),T(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw P("Promise can't be resolved itself");(e=C(t))?m(function(){var r={_w:n,_d:!1};try{e.call(t,l(F,r,1),l(N,r,1))}catch(t){N.call(r,t)}}):(n._v=t,n._s=1,T(n,!1))}catch(t){N.call({_w:n,_d:!1},t)}}};R||(O=function(t){d(this,O,"Promise","_h"),p(t),r.call(this);try{t(l(F,this,1),l(N,this,1))}catch(t){N.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(83)(O.prototype,{then:function(t,e){var n=L(y(this,O));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=M?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&T(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=l(F,t,1),this.reject=l(N,t,1)},w.f=L=function(t){return t===O||t===s?new o(t):i(t)}),f(f.G+f.W+f.F*!R,{Promise:O}),n(26)(O,"Promise"),n(84)("Promise"),s=n(1).Promise,f(f.S+f.F*!R,"Promise",{reject:function(t){var e=L(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(u||!R),"Promise",{resolve:function(t){return b(u&&this===s?O:this,t)}}),f(f.S+f.F*!(R&&n(85)(function(t){O.all(t).catch(j)})),"Promise",{all:function(t){var e=this,n=L(e),r=n.resolve,i=n.reject,o=_(function(){var n=[],o=0,s=1;v(t,!1,function(t){var u=o++,a=!1;n.push(void 0),s++,e.resolve(t).then(function(t){a||(a=!0,n[u]=t,--s||r(n))},i)}),--s||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=L(e),r=n.reject,i=_(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(15),i=n(77),o=n(78),s=n(4),u=n(48),a=n(79),l={},c={};(e=t.exports=function(t,e,n,f,h){var p,d,v,y,g=h?function(){return t}:a(t),m=r(n,f,e?2:1),w=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(p=u(t.length);p>w;w++)if((y=e?m(s(d=t[w])[0],d[1]):m(t[w]))===l||y===c)return y}else for(v=g.call(t);!(d=v.next()).done;)if((y=i(v,m,d.value,e))===l||y===c)return y}).BREAK=l,e.RETURN=c},function(t,e,n){var r=n(4);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(17),i=n(2)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(53),i=n(2)("iterator"),o=n(17);t.exports=n(1).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(0),i=n(55).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,u=r.Promise,a="process"==n(18)(s);t.exports=function(){var t,e,n,l=function(){var r,i;for(a&&(r=s.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(a)n=function(){s.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(u&&u.resolve){var c=u.resolve(void 0);n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var f=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){var r=n(0).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){var r=n(9);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(6),s=n(8),u=n(2)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];s&&e&&!e[u]&&o.f(e,u,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(2)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(0),s=n(54),u=n(57);r(r.P+r.R,"Promise",{finally:function(t){var e=s(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return u(e,t()).then(function(){return n})}:t,n?function(n){return u(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(3),i=n(36),o=n(56);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){t.exports={default:n(89),__esModule:!0}},function(t,e,n){n(90);var r=n(1).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(3);r(r.S+r.F*!n(8),"Object",{defineProperty:n(6).f})},function(t,e,n){t.exports={default:n(92),__esModule:!0}},function(t,e,n){n(43),n(52),t.exports=n(37).f("iterator")},function(t,e,n){t.exports={default:n(94),__esModule:!0}},function(t,e,n){n(95),n(42),n(100),n(101),t.exports=n(1).Symbol},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(8),s=n(3),u=n(46),a=n(96).KEY,l=n(16),c=n(34),f=n(26),h=n(25),p=n(2),d=n(37),v=n(38),y=n(97),g=n(98),m=n(4),w=n(7),_=n(12),x=n(30),b=n(24),P=n(31),k=n(99),E=n(60),S=n(6),O=n(32),M=E.f,j=S.f,L=k.f,R=r.Symbol,C=r.JSON,T=C&&C.stringify,D=p("_hidden"),z=p("toPrimitive"),A={}.propertyIsEnumerable,N=c("symbol-registry"),F=c("symbols"),I=c("op-symbols"),H=Object.prototype,G="function"==typeof R,X=r.QObject,Y=!X||!X.prototype||!X.prototype.findChild,U=o&&l(function(){return 7!=P(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=M(H,e);r&&delete H[e],j(t,e,n),r&&t!==H&&j(H,e,r)}:j,V=function(t){var e=F[t]=P(R.prototype);return e._k=t,e},B=G&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},W=function(t,e,n){return t===H&&W(I,e,n),m(t),e=x(e,!0),m(n),i(F,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=P(n,{enumerable:b(0,!1)})):(i(t,D)||j(t,D,b(1,{})),t[D][e]=!0),U(t,e,n)):j(t,e,n)},K=function(t,e){m(t);for(var n,r=y(e=_(e)),i=0,o=r.length;o>i;)W(t,n=r[i++],e[n]);return t},Z=function(t){var e=A.call(this,t=x(t,!0));return!(this===H&&i(F,t)&&!i(I,t))&&(!(e||!i(this,t)||!i(F,t)||i(this,D)&&this[D][t])||e)},J=function(t,e){if(t=_(t),e=x(e,!0),t!==H||!i(F,e)||i(I,e)){var n=M(t,e);return!n||!i(F,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n}},q=function(t){for(var e,n=L(_(t)),r=[],o=0;n.length>o;)i(F,e=n[o++])||e==D||e==a||r.push(e);return r},Q=function(t){for(var e,n=t===H,r=L(n?I:_(t)),o=[],s=0;r.length>s;)!i(F,e=r[s++])||n&&!i(H,e)||o.push(F[e]);return o};G||(u((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===H&&e.call(I,n),i(this,D)&&i(this[D],t)&&(this[D][t]=!1),U(this,t,b(1,n))};return o&&Y&&U(H,t,{configurable:!0,set:e}),V(t)}).prototype,"toString",function(){return this._k}),E.f=J,S.f=W,n(59).f=k.f=q,n(39).f=Z,n(58).f=Q,o&&!n(14)&&u(H,"propertyIsEnumerable",Z,!0),d.f=function(t){return V(p(t))}),s(s.G+s.W+s.F*!G,{Symbol:R});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)p($[tt++]);for(var et=O(p.store),nt=0;et.length>nt;)v(et[nt++]);s(s.S+s.F*!G,"Symbol",{for:function(t){return i(N,t+="")?N[t]:N[t]=R(t)},keyFor:function(t){if(!B(t))throw TypeError(t+" is not a symbol!");for(var e in N)if(N[e]===t)return e},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),s(s.S+s.F*!G,"Object",{create:function(t,e){return void 0===e?P(t):K(P(t),e)},defineProperty:W,defineProperties:K,getOwnPropertyDescriptor:J,getOwnPropertyNames:q,getOwnPropertySymbols:Q}),C&&s(s.S+s.F*(!G||l(function(){var t=R();return"[null]"!=T([t])||"{}"!=T({a:t})||"{}"!=T(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(w(e)||void 0!==t)&&!B(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!B(e))return e}),r[1]=e,T.apply(C,r)}}),R.prototype[z]||n(9)(R.prototype,z,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){var r=n(25)("meta"),i=n(7),o=n(10),s=n(6).f,u=0,a=Object.isExtensible||function(){return!0},l=!n(16)(function(){return a(Object.preventExtensions({}))}),c=function(t){s(t,r,{value:{i:"O"+ ++u,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!a(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!a(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return l&&f.NEED&&a(t)&&!o(t,r)&&c(t),t}}},function(t,e,n){var r=n(32),i=n(58),o=n(39);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var s,u=n(t),a=o.f,l=0;u.length>l;)a.call(t,s=u[l++])&&e.push(s);return e}},function(t,e,n){var r=n(18);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(12),i=n(59).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return s.slice()}}(t):i(r(t))}},function(t,e,n){n(38)("asyncIterator")},function(t,e,n){n(38)("observable")},function(t,e,n){n(103),t.exports=n(1).Object.getPrototypeOf},function(t,e,n){var r=n(51),i=n(50);n(104)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(3),i=n(1),o=n(16);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",s)}},function(t,e,n){t.exports={default:n(106),__esModule:!0}},function(t,e,n){n(107),t.exports=n(1).Object.setPrototypeOf},function(t,e,n){var r=n(3);r(r.S,"Object",{setPrototypeOf:n(108).set})},function(t,e,n){var r=n(7),i=n(4),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(15)(Function.call,n(60).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(110),__esModule:!0}},function(t,e,n){n(111);var r=n(1).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(3);r(r.S,"Object",{create:n(31)})},,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SVG=e.UnsupportedComposeTypeException=e.CannotStartNewDrawWhileDrawing=e.ElementCreationFailedException=e.MissingSVGRootElementException=e.ParentElementMustBeAHTMLElement=e.ParentElementNotFoundException=e.UnsupportedException=e.UnsupportMessage=e.XMLNGLink=e.XMLNS=e.XMLNG=e.Version=e.Feature=void 0;var r=g(n(11)),i=g(n(13)),o=g(n(19)),s=g(n(5)),u=g(n(20)),a=g(n(21));e.defaultDrawingControl=function(){function t(t,e){var n=e.svg.rect();return{x:t.clientX-n.left,y:t.clientY-n.top}}return{mousedown:function(e,n,r){var i=t(e,r);return r.start(i.x,i.y),new h.HandlerResult(n,!0)},mouseup:function(e,n,r){var i=t(e,r);return r.done(i.x,i.y),new h.HandlerResult(n,!0)},mousemove:function(e,n,r){var i=t(e,r);return r.draw(i.x,i.y),new h.HandlerResult(n,!0)}}};var l=g(n(40)),c=n(22),f=n(41),h=n(61),p=n(116),d=n(117),v=n(118),y=n(119);function g(t){return t&&t.__esModule?t:{default:t}}var m=e.Feature="http://www.w3.org/TR/SVG11/feature#Image",w=e.Version="1.1",_=e.XMLNG="http://www.w3.org/2000/svg",x=e.XMLNS="http://www.w3.org/2000/xmlns/",b=e.XMLNGLink="http://www.w3.org/1999/xlink",P=e.UnsupportMessage="This image is unsupported by your browser";var k=e.UnsupportedException=function(t){function e(){return(0,s.default)(this,e),(0,u.default)(this,(e.__proto__||(0,o.default)(e)).call(this,"SVG is unsupported in current context"))}return(0,a.default)(e,t),e}(l.default),E=e.ParentElementNotFoundException=function(t){function e(t){return(0,s.default)(this,e),(0,u.default)(this,(e.__proto__||(0,o.default)(e)).call(this,'Parent Element "'+t+'" was not found in the context'))}return(0,a.default)(e,t),e}(l.default),S=e.ParentElementMustBeAHTMLElement=function(t){function e(t,n){return(0,s.default)(this,e),(0,u.default)(this,(e.__proto__||(0,o.default)(e)).call(this,'Parent Element "'+t+'" is a "'+(void 0===n?"undefined":(0,i.default)(n))+'" rather than expected HTMLDOMElement'))}return(0,a.default)(e,t),e}(l.default),O=e.MissingSVGRootElementException=function(t){function e(t){return(0,s.default)(this,e),(0,u.default)(this,(e.__proto__||(0,o.default)(e)).call(this,"Missing SVG Root element in current context"))}return(0,a.default)(e,t),e}(l.default),M=e.ElementCreationFailedException=function(t){function e(t){return(0,s.default)(this,e),(0,u.default)(this,(e.__proto__||(0,o.default)(e)).call(this,'Failed to create "'+t+'" SVG element'))}return(0,a.default)(e,t),e}(l.default),j=(e.CannotStartNewDrawWhileDrawing=function(t){function e(){return(0,s.default)(this,e),(0,u.default)(this,(e.__proto__||(0,o.default)(e)).call(this,"Cannot start a new draw while drawing"))}return(0,a.default)(e,t),e}(l.default),e.UnsupportedComposeTypeException=function(t){function e(t){return(0,s.default)(this,e),(0,u.default)(this,(e.__proto__||(0,o.default)(e)).call(this,"Unsupported Compose Type: "+t))}return(0,a.default)(e,t),e}(l.default)),L=function(){function t(e,n,r,i,o){var u=this;(0,s.default)(this,t),this.element=e.newElement("image",{"xlink:href":n.URL(),x:0,y:0,height:n.height()+"px",width:n.width()+"px","pointer-events":"none"}),o?(this.element.addEventListener("load",function(t){r(u)}),this.element.addEventListener("error",function(t){i(t)})):r(this),this.background=n,this.svg=e,this.reset()}return(0,r.default)(t,[{key:"reset",value:function(){var t=this.svg.rect(),e=this.background.zoom(t.width,t.height).fit;(e<1||this.background.zoomable(t.width,t.height))&&(e=1);var n=-(t.width-this.background.width()/e)/2*e,r=-(t.height-this.background.height()/e)/2*e;t.width,this.background.width(),t.height,this.background.height();this.svg.panTo(n,r,e)}},{key:"width",value:function(){return this.background.width()}},{key:"height",value:function(){return this.background.height()}},{key:"zoom",value:function(t,e){return this.background.zoom(t,e)}},{key:"zoomable",value:function(t,e){return this.background.zoomable(t,e)}},{key:"remove",value:function(){this.element.parentNode.removeChild(this.element),this.svg.resetZoom(!0)}}]),t}();var R={"xmlns:xlink":b,version:w,width:0,height:0,viewBox:"0 0 0 0",style:"margin: 0; padding: 0; display: block",preserveAspectRatio:"none"};var C=function(){function t(e){if((0,s.default)(this,t),!window.document.implementation.hasFeature(m,w))throw new k;if(this.parent=document.getElementById(e),!this.parent)throw new E(e);if(!(0,c.isHTMLElement)(this.parent))throw new S(e,this.parent);this.zoomLevel=1,this.panX=0,this.panY=0,this.parentRect={},this.container=this.newElement("svg",R),this.message=document.createTextNode(P),this.target=this.newElement("g",{}),this.container.appendChild(this.target),this.container.appendChild(this.message),this.parent.appendChild(this.container),this.picture=null,this.drawings=[],this.fitResync(function(t){return!0})}return(0,r.default)(t,[{key:"teardown",value:function(){this.clear(),this.target.parentNode.removeChild(this.target),this.message.parentNode.removeChild(this.message),this.container.parentNode.removeChild(this.container),this.picture=null,this.target=null,this.message=null,this.container=null,this.parent=null}},{key:"element",value:function(){return this.container}},{key:"clear",value:function(){for(var t in this.picture&&(this.picture.remove(),this.picture=null),this.drawings)this.target.removeChild(this.drawings[t]);this.drawings=[]}},{key:"panTo",value:function(t,e,n){this.zoomLevel<=0||(this.panX=t,this.panY=e,this.zoomLevel=n,this.fitResync(function(t){return!0}))}},{key:"zoom",value:function(t,e,n,r,i){if(this.picture){var o=this.rect();if(!(o.width<=0||o.height<=0)){if(!i)return this.panX+=n*this.zoomLevel,this.panY+=r*this.zoomLevel,void this.fitResync(function(t){return!0});var s=this.picture.width()/this.zoomLevel+i,u=this.picture.height()/this.zoomLevel+i;if(s<=0||u<=0||!this.picture.zoomable(s,u))return this.panX+=n*this.zoomLevel,this.panY+=r*this.zoomLevel,void this.fitResync(function(t){return!0});var a=this.picture.zoom(s,u).fill;if(a==this.zoomLevel)return this.panX+=n*this.zoomLevel,this.panY+=r*this.zoomLevel,void this.fitResync(function(t){return!0});var l=(t-o.left)/o.width,c=(e-o.top)/o.height,f=(o.width*this.zoomLevel-o.width*a)*l,h=(o.height*this.zoomLevel-o.height*a)*c;this.zoomLevel=a,this.panX+=f,this.panY+=h,this.fitResync(function(t){return!0})}}}},{key:"resetZoom",value:function(t){this.zoomLevel=1,this.panX=0,this.panY=0,this.fitResync(function(e){return t})}},{key:"reset",value:function(){return this.picture?(this.resetZoom(!1),this.picture.reset()):this.resetZoom(!0)}},{key:"refit",value:function(){var t=this;this.fitResync(function(e){return t.zoom(0,0,(t.parentRect.width-e.width)/2,(t.parentRect.height-e.height)/2,0),!0})}},{key:"fitResync",value:function(t){var e=this.parent.getBoundingClientRect();if(t(e)){this.parentRect=e;var n=this.parentRect.width*this.zoomLevel,r=this.parentRect.height*this.zoomLevel;this.setElement(this.container,{width:this.parentRect.width+"px",height:this.parentRect.height+"px",viewBox:[this.panX,this.panY,n,r].join(" ")})}else this.parentRect=e}},{key:"rect",value:function(){return this.container.getBoundingClientRect()}},{key:"setElement",value:function(t,e){for(var n in e)0===n.indexOf("xlink:")?t.setAttributeNS(b,n,e[n]):0===n.indexOf("xmlns:")?t.setAttributeNS(x,n,e[n]):t.setAttribute(n,e[n])}},{key:"newElement",value:function(t,e){var n=document.createElementNS(_,t);if(!n)throw new M(t);return this.setElement(n,e),n}},{key:"background",value:function(t,e,n,r){this.picture&&(this.picture.remove(),this.picture=null);var i=new L(this,t,e,n,r);this.picture=i,this.target.appendChild(i.element)}},{key:"insertDrawing",value:function(t,e){if(!this.target)throw new O;var n=this.newElement("path",function(t,e){var n=(0,c.filterDefault)({stroke:"black","stroke-width":3,fill:"none",d:t},e);return n.d=t,n}(t,e));return this.target.appendChild(n),this.drawings.push(n),n}},{key:"removeDrawing",value:function(t){for(var e in this.drawings)if(this.drawings[e]==t)return this.target.removeChild(t),void this.drawings.splice(e,1)}},{key:"insert",value:function(t,e,n){switch(t){case f.drawPath:return new p.PathInserter(this,n,e);case f.drawLine:return new d.LineInserter(this,n,e);case f.drawRect:return new v.RectInserter(this,n,e);case f.drawEllipse:return new y.EllipseInserter(this,n,e);default:throw new j(t)}}},{key:"compose",value:function(t,e,n,r,i,o){switch(o){case f.drawPath:return new p.PathComposer(this,t,e,n,r,i);case f.drawLine:return new d.LineComposer(this,t,e,n,r,i);case f.drawRect:return new v.RectComposer(this,t,e,n,r,i);case f.drawEllipse:return new y.EllipseComposer(this,t,e,n,r,i);default:throw new j(o)}}}]),t}();e.SVG=C},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PathComposer=e.PathInserter=void 0;var r=c(n(19)),i=c(n(5)),o=c(n(11)),s=c(n(20)),u=c(n(21)),a=n(22),l=n(41);function c(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,n){(0,i.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return o.properties=n,o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"type",value:function(){return l.drawPath}},{key:"savePathPoint",value:function(t,e){this.plots.push({x:t,y:e})}},{key:"buildDotPath",value:function(){var t="";if(this.plots.length<=0)return t;t+="M"+this.plots[0].x+","+this.plots[0].y;for(var e=1;e<this.plots.length;e++)t+=" L"+this.plots[e].x+","+this.plots[e].y;return t}},{key:"buildCurvePath",value:function(){var t="";if(this.plots.length<=0)return t;t+="M"+this.plots[0].x+","+this.plots[0].y+" Q";for(var e=null,n=(this.plots.length-1)%2,r=1;r<this.plots.length;r++)e=this.plots[r],t+=this.plots[r].x+","+this.plots[r].y+" ";for(var i=0;i<n;i++)t+=e.x+","+e.y+" ";return t.trim()}},{key:"pointDistance",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}},{key:"angleOfCornerA",value:function(t,e,n,r){var i=this.pointDistance(n,r),o=this.pointDistance(r,e),s=(Math.pow(o,2)+Math.pow(t,2)-Math.pow(i,2))/(2*o*t);return s>=1?0:Math.acos(s)}},{key:"compressPath",value:function(){if(!(this.plots.length<3))for(var t=0,e=null,n=null,r=1,i=0;t<this.plots.length;){if(e)if(n)this.angleOfCornerA(i,e,n,this.plots[t])<.08?this.plots.splice(r,1):(e=null,n=null);else n=this.plots[t],r=t,i=this.pointDistance(e,n),t++;else e=this.plots[t],t++}}}]),e}(n(63).Composer);e.PathInserter=function(t){function e(t,n,o){(0,i.default)(this,e);var u=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,o));return u.plots=n,u.setPathElement(u.svg.insertDrawing(u.buildDotPath(),u.properties)),u}return(0,u.default)(e,t),e}(f),e.PathComposer=function(t){function e(t,n,o,u,l,c){(0,i.default)(this,e);var f=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,l));return f.drawing=!1,f.resolve=n,f.reject=o,f.userctl=u,f.controls=c(),(0,a.assertType)(f.controls,"object"),f.userctl.listens(f.controls,f),f}return(0,u.default)(e,t),(0,o.default)(e,[{key:"start",value:function(t,e){if(!this.drawing){this.drawing=!0;var n=this.convertPos(t,e);this.savePathPoint(n.x,n.y),this.setPathElement(this.svg.insertDrawing(this.buildDotPath(),this.properties))}}},{key:"draw",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.savePathPoint(n.x,n.y),this.set({d:this.buildDotPath()})}}},{key:"done",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.savePathPoint(n.x,n.y),this.compressPath(),this.set({d:this.buildCurvePath()}),this.clear()}}},{key:"clear",value:function(){this.drawing=!1,this.userctl.removes(this.controls),this.resolve(this)}}]),e}(f)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineComposer=e.LineInserter=void 0;var r=f(n(19)),i=f(n(5)),o=f(n(11)),s=f(n(20)),u=f(n(21)),a=n(22),l=n(41),c=n(63);function f(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,n){(0,i.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return o.properties=n,o.path=null,o.plots=[{x:0,y:0},{x:0,y:0}],o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"type",value:function(){return l.drawLine}},{key:"setStartPoint",value:function(t,e){this.plots[0]={x:t,y:e}}},{key:"setEndPoint",value:function(t,e){this.plots[1]={x:t,y:e}}},{key:"buildLinePath",value:function(){var t="";return 2!==this.plots.length?t:(t+="M"+this.plots[0].x+","+this.plots[0].y,t+=" L"+this.plots[1].x+","+this.plots[1].y)}}]),e}(c.Composer);e.LineInserter=function(t){function e(t,n,o){(0,i.default)(this,e);var u=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,o));return u.plots=n,u.setPathElement(u.svg.insertDrawing(u.buildLinePath(),u.properties)),u}return(0,u.default)(e,t),e}(h),e.LineComposer=function(t){function e(t,n,o,u,l,c){(0,i.default)(this,e);var f=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,l));return f.drawing=!1,f.resolve=n,f.reject=o,f.userctl=u,f.controls=c(),(0,a.assertType)(f.controls,"object"),f.userctl.listens(f.controls,f),f}return(0,u.default)(e,t),(0,o.default)(e,[{key:"start",value:function(t,e){if(!this.drawing){this.drawing=!0;var n=this.convertPos(t,e);this.setStartPoint(n.x,n.y),this.setEndPoint(n.x,n.y),this.setPathElement(this.svg.insertDrawing(this.buildLinePath(),this.properties))}}},{key:"draw",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.setEndPoint(n.x,n.y),this.set({d:this.buildLinePath()})}}},{key:"done",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.setEndPoint(n.x,n.y),this.set({d:this.buildLinePath()}),this.clear()}}},{key:"clear",value:function(){this.drawing=!1,this.userctl.removes(this.controls),this.resolve(this)}}]),e}(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RectComposer=e.RectInserter=void 0;var r=f(n(19)),i=f(n(5)),o=f(n(11)),s=f(n(20)),u=f(n(21)),a=n(22),l=n(41),c=n(63);function f(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,n){(0,i.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return o.properties=n,o.path=null,o.plots=[{x:0,y:0},{x:0,y:0}],o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"type",value:function(){return l.drawRect}},{key:"setStartPoint",value:function(t,e){this.plots[0]={x:t,y:e}}},{key:"setEndPoint",value:function(t,e){this.plots[1]={x:t,y:e}}},{key:"buildRectPath",value:function(){var t="";return 2!==this.plots.length?t:(t+="M"+this.plots[0].x+","+this.plots[0].y,t+=" L"+this.plots[1].x+","+this.plots[0].y,t+=" L"+this.plots[1].x+","+this.plots[1].y,t+=" L"+this.plots[0].x+","+this.plots[1].y,t+=" L"+this.plots[0].x+","+this.plots[0].y,t+=" Z")}}]),e}(c.Composer);e.RectInserter=function(t){function e(t,n,o){(0,i.default)(this,e);var u=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,o));return u.plots=n,u.setPathElement(u.svg.insertDrawing(u.buildRectPath(),u.properties)),u}return(0,u.default)(e,t),e}(h),e.RectComposer=function(t){function e(t,n,o,u,l,c){(0,i.default)(this,e);var f=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,l));return f.drawing=!1,f.resolve=n,f.reject=o,f.userctl=u,f.controls=c(),(0,a.assertType)(f.controls,"object"),f.userctl.listens(f.controls,f),f}return(0,u.default)(e,t),(0,o.default)(e,[{key:"start",value:function(t,e){if(!this.drawing){this.drawing=!0;var n=this.convertPos(t,e);this.setStartPoint(n.x,n.y),this.setEndPoint(n.x,n.y),this.setPathElement(this.svg.insertDrawing(this.buildRectPath(),this.properties))}}},{key:"draw",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.setEndPoint(n.x,n.y),this.set({d:this.buildRectPath()})}}},{key:"done",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.setEndPoint(n.x,n.y),this.set({d:this.buildRectPath()}),this.clear()}}},{key:"clear",value:function(){this.drawing=!1,this.userctl.removes(this.controls),this.resolve(this)}}]),e}(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EllipseComposer=e.EllipseInserter=void 0;var r=f(n(19)),i=f(n(5)),o=f(n(11)),s=f(n(20)),u=f(n(21)),a=n(22),l=n(41),c=n(63);function f(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,n){(0,i.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return o.properties=n,o.path=null,o.plots=[{x:0,y:0},{x:0,y:0}],o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"type",value:function(){return l.drawEllipse}},{key:"setStartPoint",value:function(t,e){this.plots[0]={x:t,y:e}}},{key:"setEndPoint",value:function(t,e){this.plots[1]={x:t,y:e}}},{key:"getStartPoint",value:function(){return{x:this.plots[1].x>this.plots[0].x?this.plots[0].x:this.plots[1].x,y:this.plots[1].y>this.plots[0].y?this.plots[0].y:this.plots[1].y}}},{key:"getEndPoint",value:function(){return{x:this.plots[1].x<=this.plots[0].x?this.plots[0].x:this.plots[1].x,y:this.plots[1].y<=this.plots[0].y?this.plots[0].y:this.plots[1].y}}},{key:"getRadius",value:function(t,e){return{x:e.x-t.x,y:e.y-t.y}}},{key:"buildEllipsePath",value:function(){var t="";if(2!==this.plots.length)return t;var e=this.getStartPoint(),n=this.getEndPoint(),r=this.getRadius(e,n),i=(n.x-e.x)/2,o=(n.y-e.y)/2,s=e.x+i,u=e.y+o,a=r.x/2,l=r.y/2;return t+="M"+(s-a)+","+u+" ",t+="a"+a+","+l+" 0 1,0 "+2*a+",0 ",t+="a"+a+","+l+" 0 1,0 -"+2*a+",0"}}]),e}(c.Composer);e.EllipseInserter=function(t){function e(t,n,o){(0,i.default)(this,e);var u=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,o));return u.plots=n,u.setPathElement(u.svg.insertDrawing(u.buildEllipsePath(),u.properties)),u}return(0,u.default)(e,t),e}(h),e.EllipseComposer=function(t){function e(t,n,o,u,l,c){(0,i.default)(this,e);var f=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,l));return f.drawing=!1,f.resolve=n,f.reject=o,f.userctl=u,f.controls=c(),(0,a.assertType)(f.controls,"object"),f.userctl.listens(f.controls,f),f}return(0,u.default)(e,t),(0,o.default)(e,[{key:"start",value:function(t,e){if(!this.drawing){this.drawing=!0;var n=this.convertPos(t,e);this.setStartPoint(n.x,n.y),this.setEndPoint(n.x,n.y),this.setPathElement(this.svg.insertDrawing(this.buildEllipsePath(),this.properties))}}},{key:"draw",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.setEndPoint(n.x,n.y),this.set({d:this.buildEllipsePath()})}}},{key:"done",value:function(t,e){if(this.drawing){var n=this.convertPos(t,e);this.setEndPoint(n.x,n.y),this.set({d:this.buildEllipsePath()}),this.clear()}}},{key:"clear",value:function(){this.drawing=!1,this.userctl.removes(this.controls),this.resolve(this)}}]),e}(h)}])});